'use strict';

{
	let canvas = document.querySelector('canvas');
	let w = document.getElementById('wrap');
	canvas.width = w.clientWidth;
	canvas.height = w.clientHeight;
	let ctx = canvas.getContext('2d');

	let x = 0;
	let x1 = Math.random() * canvas.width;
	let x7 = Math.random() * canvas.width;
	let vx7 = 2;
	let x8 = Math.random() * canvas.width;
	let x9 = Math.random() * canvas.width;
	let x10 = Math.random() * canvas.width;
	let x11 = Math.random() * canvas.width;

	let y1 = 50;
	let y2 = 100;
	let y3 = 20;
	let y4 = 200;
	let y5 = 20;
	let y6 = 500;
	let y7 = 350;
	let y8 = 200;
	let y9 = 400;
	let y10 = 630;
	let y11 = 480;

	let t = 0;
	let t1 = 0;
	let t9 = 0;

	function draw(){

		let img1 = new Image();
		img1.src = "<%= image_path('christmas_cake.png') %>";

		let img2 = new Image();
		img2.src = "<%= image_path('sweets_cake_pavlova.png') %>";

		let img3 = new Image();
		img3.src = "<%= image_path('sweets_cheesecake.png') %>";

		let img4 = new Image();
		img4.src = "<%= image_path('sweets_chiffoncake_cut1_plain.png') %>";

		let img5 = new Image();
		img5.src = "<%= image_path('sweets_chiffoncake1_plain.png') %>";

		let img6 = new Image();
		img6.src = "<%= image_path('sweets_chocolate_cake_sachertorte.png') %>";

		let img7 = new Image();
		img7.src = "<%= image_path('sweets_colorful_cupcake_brown.png') %>";

		let img8 = new Image();
		img8.src = "<%= image_path('sweets_funnelcake.png') %>";

		let img9 = new Image();
		img9.src = "<%= image_path('christmas_bush_de_noel.png') %>";

		let img10 = new Image();
		img10.src = "<%= image_path('sweets_pancake.png') %>";

		let img11 = new Image();
		img11.src = "<%= image_path('sweets_shortcake.png') %>";

		let map = new Image();
		map.src = "<%= image_path('nihonchizu_area.png') %>";

		let about1 = new Image();
		about1.src = "<%= image_path('about1.jpg') %>";

		let about2 = new Image();
		about2.src = "<%= image_path('about2.jpg') %>";

		let about3 = new Image();
		about3.src = "<%= image_path('about3.jpg') %>";

		ctx.drawImage(img1, x1, y1, 50, 50);
		ctx.drawImage(img2, x + 50, y2 , 100, 100);
		ctx.drawImage(img3, (x + 100) * Math.cos(t / 180), y3 , 70, 70);
		ctx.drawImage(img4, x + 150, y4 , 50, 50);
		ctx.drawImage(img5, (x + 200) + 100 * Math.sin(t1 / 30), y5 , 70, 70);
		ctx.drawImage(img6, (x + 250) + 200 * Math.sin(t1 / 180), y6 , 100, 100);
		ctx.drawImage(img7, x7, y7 , 50, 50);
		ctx.drawImage(img8, x8, y8 , 50, 50);
		ctx.drawImage(img9, x9 * Math.sin(t9 / 180), y9 , 70, 70);
		ctx.drawImage(img10, x10 + 300 * Math.sin(t1 / 60), y10 , 50, 50);
		ctx.drawImage(img11, x11, y11 , 100, 100);
		ctx.drawImage(map, 1000, 150, 300, 300);

		ctx.font = '50pt fantasy';
  　		ctx.fillStyle = 'rgba(210, 105, 30)';
		ctx.fillText('We are NaganoCAKE', 20, 70);

		ctx.font = '30pt arial black';
		ctx.fillStyle = 'rgba(0, 0, 0)';
		ctx.fillText('アクセス', 950, 150);

		ctx.font = '30pt Arial';
		ctx.fillStyle = 'rgba(255, 0, 0)';
		ctx.fillText('ここ↓', 1080, 320);

		ctx.fillStyle = 'rgba(105, 105, 105, 0.6)';
		ctx.fillRect(40, 100, 860, 430);
		ctx.font = '30pt arial black';
		ctx.fillStyle = 'rgba(250, 240, 230)';
		ctx.fillText('ながのCAKEのこだわり', 50, 150);

		ctx.font = '20pt arial narrow';
		ctx.fillStyle = 'rgba(255, 255, 255)';
		ctx.fillText('卵や牛乳、水、果物など、お菓子に必要な素材を、地元の契約農家', 70, 200);
		ctx.fillText('や農場より直接仕入れることにより、おいしさとお値打ち価格、そ', 70, 240);
		ctx.fillText('して安全・安心が加わったお菓子をお客様へお届けいたします。', 70, 280);
		ctx.drawImage(about1, 65, 320, 250, 200);
		ctx.drawImage(about2, 345, 320, 250, 200);
		ctx.drawImage(about3, 625, 320, 250, 200);

		x1 += 0.5;
		x7 += vx7;
		x8 -= 1;
		x11 -= 2;

		if (x1 > canvas.width) {
			x1 = 0;
		}

		if (x7 > canvas.width - 50) {
			vx7 *= -1;
		}else if(x7 < 0) {
			vx7 *= -1;
		}

		if (x8 < 0) {
			x8 = canvas.width;
		}

		if (x11 < 0) {
			x11 = canvas.width;
		}

		y1 += 1;
		y2 += 1;
		y3 += 2.5;
		y4 += 2;
		y5 += 1;
		y6 += 2;
		y7 += 1.5;
		y8 += 0.7
		y9 += 2;
		y10 += 3;
		y11 += 2;

		if (y1 > canvas.height) {
			y1 = -50;
		}
		if (y2 > canvas.height) {
			y2 = -50;
		}
		if (y3 > canvas.height) {
			y3 = -50;
		}
		if (y5 > canvas.height) {
			y5 = -50;
		}
		if (y6 > canvas.height) {
			y6 = -50;
		}
		if (y7 > canvas.height) {
			y7 = -50;
		}
		if (y8 > canvas.height) {
			y8 = -50;
		}
		if (y10 > canvas.height) {
			y10 = -50;
		}
		if (y11 > canvas.height) {
			y11 = -50;
		}

		t++;
		t1++;
		t9++;
		if (t > 360) {
			t = 0;
			y4 = -50;
		}
		if (t9 > 360) {
			t9 = 0;
			y9 = -50;
		}

	}

	function clear(){
		ctx.fillStyle = '#fee';
		ctx.fillRect(0, 0, canvas.width, canvas.height);
	}

	function update(){
		clear();
		draw();
		setTimeout(function() {
			update();
		}, 10);
	}

	update();
}